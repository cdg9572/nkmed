
	<form name='form' method='post' action='reserve/reserve_proc.html' target="company_proc" >
		<input type='hidden' name='tbl' value='smart_resspers'>
		<input type='hidden' name='mode' value='new'>
		<input type='hidden' name='seq' value='<?=$seq?>'>
		<input type='hidden' name='cpname' value='<?=$cpname;?>'>
		<input type='hidden' name='pname' value='<?=$pname;?>'>


	
	<!--<h2>건강검진 예약</h2>-->
	
	<section style="font-size:15px;">
	<i class="fa fa-certificate" aria-hidden="true"></i>아래항목에 자료입력하시면 검진예약을 도와드립니다.<br/>
	</section>


		
<script language="javascript" type="text/javascript">

	$(function () {
		$('#contents tr').hide();
		$('#contents').find('.title').parent().show(); 
		$('#contents').find('.title2').parent().show(); 
		$('#contents .title').parent().click(function(){ 
			$('#contents tr').hide();
			
			$('#contents').find('.title').parent().show();
			$('#contents').find('.title2').parent().show();
			$('#contents').find('.title').css('background-color', '#fff'); 
			var tr = $('#contents tr'); 
			var rindex = $(this).parent().children().index(this); 
			$(this).children().css('background-color', '#f7f7f7');
			for(var i = rindex; i < rindex + 2; i++){
				i = i+3 ;
				$(tr[i]).show();
			}
		});
	});
</script>
	
		

<script src="../../js/jquery.js" type="text/javascript"></script>
<script src="../../js/Calendar.js" type="text/javascript"></script>

<link type="text/css" href="../../js/ui/themes/base/ui.all.css" rel="stylesheet" />
<script type="text/javascript" src="../../js/ui/ui.core.js"></script>
<script type="text/javascript" src="../../js/ui/ui.datepicker.js"></script>
<script type="text/javascript" src="../../js/ui/ui.datepicker-ko.js"></script>
<script type="text/javascript">

$(function() {
	$('#datepicker1').datepicker({
		changeMonth: true,
		changeYear: true,
		yearRange: '2016:2020'
	});	
});
	//		$("#datepicker").datepicker($.datepicker.regional['ko']);
	</script>





<?

$datetemp =  date("Y-m-d", strtotime(date("Y-m-d")." + 4 day"));

?>

		<table width="100%" class="tbst02">
			<tr>
				<th colspan="2" style="background:#187DC0 !important; color: #FFF !important;">일정 및 개인정보 입력</th>
			</tr>
			<tr>
				<th width="35%">희망 검진일</th>
				<td width="65%">
					
					<input type="text" name = "reserve_date"  id="datepicker1" class="intextst01" placeholder="예약은 <?= $datetemp ?> 부터 가능합니다." onfocus="blur();">


					<!--<input type="date" name = "reserve_date"  class="intextst01" placeholder="DD/MM/YYYY">-->
				</td>
			</tr>
			<tr>
				<th>희망 검진시간</th>
				<td>
					<select name="reserve_hour">
						<option value="07">07시</option>
						<option value="08">08시</option>
						<option value="09">09시</option>
						<option value="10">10시</option>
						<option value="11">11시</option>
						<option value="12">12시</option>
						<option value="13">13시</option>
						<option value="14">14시</option>
						<option value="15">15시</option>
						<option value="16">16시</option>
						<option value="17">17시</option>
						<option value="18">18시</option>
					</select>
					<select name="reserve_min">
						<option value="00">00분</option>
						<option value="15">15분</option>
						<option value="30">30분</option>
						<option value="45">45분</option>
					</select>
				</td>
			</tr>
			<tr>
				<th>거래처명</th>
				<td><input type="text" class="intextst01" name="cpname"  placeholder="거래처이시면 기입해주세요"></td>
			</tr>
			<tr>
				<th>성명</th>
				<td><input type="text" class="intextst01" name="name"  placeholder="성명을 입력해주세요"></td>
			</tr>
			<tr>
				<th>연락처</th>
				<td><input type="tel" class="intextst01" name="mobile_no" placeholder="&quot;-&quot; 없이 입력해주세요."></td>
			</tr>
			<tr>
				<th>추천인</th>
				<td><input type="text" class="intextst01" name="hname"  placeholder="성명을 입력해주세요"></td>
			</tr>
			<tr>
				<th>메모</th>
				<td><textarea name="memo" class="intextst01"  placeholder="궁금한 내용 및 요청사항 입력 해주세요."></textarea></td>
			</tr>
			<tr>
				<th>대상병원</th>
				<td><input type="radio"  name="ctype" value="뉴고려" >김포뉴고려병원<br/>
					<input type="radio"  name="ctype" value="나은" >인천나은병원(가좌)<br/>
					<input type="radio"  name="ctype" value="지안" >송도지안검진센터</td>
			</tr>
		</table>
		

		<!--
		<table width="100%" class="tbst01">
			<thead>
				<tr>
					<th colspan="4" style="background:#187DC0 !important; color: #FFF !important;">모바일 검진 결과 통보 문자 알림 서비스(무료)</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>예 <input type="radio" name="mobileSMS_check" value="Y"/> | 아니요 <input type="radio" name="mobileSMS_check"  value="N"/></td>
				</tr>
			</tbody>
		</table>
		-->

<style>
div.caluse-common {
	color: #666;
	padding: 10px;
	height: 70px;
	border: 1px solid #ccc;
	overflow-x: hidden;
	overflow-y: auto;
	margin-bottom: 15px;
	text-align:left;
}
</style>

		<table width="100%" class="tbst01">
			<thead>
				<tr>
					<th colspan="4" style="background:#187DC0 !important; color: #FFF !important;">개인정보 수집/이용 동의서</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>
					
		<h3>개인정보 수집/이용 동의서</h3>
		<div id="caluse-02" class="caluse-common">
"개인정보 보호법"에 따라 본인의 동의를 받아 검진 예약 상담을 진행하고자 합니다.
<br>
<br>
<br>1. 개인정보 수집/이용 목적 : 검진 예약 상담
<br>
<br>2. 개인정보 수집 항목 : 성명, 거래처, 연락처
<br>
<br>3. 보유 및 이용기간 : 수검 완료시
<br>
<br></div>

		<p class="calusep">개인정보 수집/이용에 동의합니다.(선택) <input type="checkbox" id="agree" name="agree" value="yes"> 동의 <input type="checkbox" id="agree2" name="agree2" value="no"> 동의하지 않음</p>
		
	</section>
</article>


					
					</td>
				</tr>
			</tbody>
		</table>
		
		<div style="padding:20px 0px;">
			<a href="#" class="btnst01" onClick="chkForm(document.form)">검진 예약하기</a>
			
		</div>
	</section>

	</form>

</div>


<?
//================= 예약일 일자 설정 
$reserve_interval = 3 ;

?>


<!--//=== 시간체크를 위한 스크립트 -->
<script language="JavaScript">

function toTimeObject(time) // 2011-11-11
{
	/*
	var year = time.substr(0,4) ;
	var month = time.substr(5,2) ;
	var day = time.substr(8,2) ;
	*/

	var arr_t = time.split("-") ;
	var year = arr_t[0] ;
	var month = arr_t[1] ;
	var day = arr_t[2] ;

	var c_date = new Date(year, month, day) ;
	var t = c_date.getTime() ;

	return t ;

}

function getDateInterval(time1, time2)
{

	var date1 = toTimeObject(time1);
	var date2 = toTimeObject(time2);
	var day = 1000 * 3600 * 24 ;
	var temp =  date2 - date1 ;

	return parseInt((date2 - date1)/day, 10);
}

function converDateString(dt){
	return dt.getFullYear() + "-" + addZero(eval(dt.getMonth()+1)) + "-" + addZero(dt.getDate());
}

function addZero(i){
	var rtn = i + 100;
	return rtn.toString().substring(1,3);
}

function calDateRange(val1, val2)
{
	var FORMAT = "-";
	// FORMAT을 포함한 길이 체크
	if (val1.length != 10 || val2.length != 10)
		return null;
	// FORMAT이 있는지 체크
	if (val1.indexOf(FORMAT) < 0 || val2.indexOf(FORMAT) < 0)
		return null;
	// 년도, 월, 일로 분리
	var start_dt = val1.split(FORMAT);
	var end_dt = val2.split(FORMAT);

	// 월 - 1(자바스크립트는 월이 0부터 시작하기 때문에...)
	// Number()를 이용하여 08, 09월을 10진수로 인식하게 함.
	start_dt[1] = (Number(start_dt[1]) - 1) + "";
	end_dt[1] = (Number(end_dt[1]) - 1) + "";
	var from_dt = new Date(start_dt[0], start_dt[1], start_dt[2]);
	var to_dt = new Date(end_dt[0], end_dt[1], end_dt[2]);
	return (to_dt.getTime() - from_dt.getTime()) / 1000 / 60 / 60 / 24;
}

</script>


<script language="JavaScript">
<!--	

/*
var sd = "2016-10-28" ;
//var ed = "2016-10-31" ;
var ed = "2016-11-01" ;
var tt = getDateInterval(sd, ed) ;
var cc = calDateRange(sd, ed) ;

alert(tt + " || " + cc + " &&--> " + sd + " ||| " + ed) ;

var today = new Date();  
var dateString ="2016-10-29" ;
var dateArray = dateString.split("-");  
var dateObj = new Date(dateArray[0], Number(dateArray[1])-1, dateArray[2]);  
var betweenDay = (today.getTime() - dateObj.getTime())/1000/60/60/24;  
*/


function chkForm(frm) {


	if (!$("#agree").attr("checked")  || $("#agree2").attr("checked"))
	 {
	  alert('개인정보 수집/이용 동의서에 동의 하여야 진행이 가능합니다.');
	  frm.agree.focus();
	  return;
	 }

	

	if(!frm.reserve_date.value) {
		alert('검진희망일을 선택해 주세요.');
		frm.reserve_date.focus();
		return false;
	}


	//== 검진 가능일 계산
	var newDt = new Date();
	var intd = <?=$reserve_interval?> + 1 ;
	newDt.setDate( newDt.getDate() + intd );
	var nextDate = converDateString(newDt);

	var Today = new Date(); //오늘의 날짜정보를 가져옴.
	var year = Today. getFullYear();//객체에생선된 년도 정보를 가져옴.
	var month = Today.getMonth() + 1;//객체에 생선된 월의 정보를 가져옴…
	var day = Today.getDate();//객체에 생선된 일의 정보를 가져옴.
	var date1 = year + "-" + addZero(month) + "-" + addZero(day) ;


	if(frm.reserve_date.value )
	{
		//var temp = getDateInterval(date1, frm.reserve_date.value) ;
		var temp = calDateRange(date1, frm.reserve_date.value) ;
		

		//alert(temp + " --> " + date1 + " ||| " + frm.reserve_date.value) ;


		if(temp <= <?=$reserve_interval?>) 
		{
			alert('검진은 ' + nextDate + ' 이후부터 가능합니다') ;
			frm.reserve_date.focus();
			return false;
		}		
	}


	if(!frm.name.value) {
		alert('성명을 입력해 주세요.');
		frm.name.focus();
		return false;
	}


	if(!frm.mobile_no.value) {
		alert('연락처를 입력해 주세요.');
		frm.mobile_no.focus();
		return false;
	}

	frm.submit();
}



function chk_radio() 
{ 
	 num_temp = document.all.item_category.length; 

	 for (i=0;i<num_temp ;i++) 
	 { 
	  if (document.all.item_category[i].checked == true) 
	  { 
		 break; 
	  } 
	 } 
	 if (i == num_temp) 
	 { 
		//alert("하나를 선택하세요"); 
		return false ;
	 }
	 else 
	{
		return true ;
	}
} 
//-->
</script>


<?
if($_SERVER['REMOTE_ADDR'] == "122.45.143.21")  //== 테스트 중일때 문자 발송 금지
{
?>
	<iframe name="company_proc" width=700 height=700></iframe>
<?
}
else
{
?>
	<iframe name="company_proc" width=0 height=0></iframe>
<?
}
?>

	<footer>
		<p>Copyright(c) 2016 NEW Korea Hospital</p>
	</footer>
</body>
</html>
