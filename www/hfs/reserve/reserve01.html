<?
session_start();
header("Content-Type:text/html;charset=utf-8") ;

ini_set("display_errors", 1);
error_reporting(E_ALL ^ E_NOTICE);

//==== register_global 처리
@extract($_GET);
@extract($_POST);
@extract($_SERVER);
@extract($_FILES);
@extract($_ENV);
@extract($_COOKIE);
@extract($_SESSION);

$DOCUMENT_ROOT = $DOCUMENT_ROOT."";

include "../inc/func.php";
include "../inc/dbConn.php";

?>


<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>간편예약</title>

<link rel="stylesheet" type="text/css" href="../css/boilerplate.css">
<link rel="stylesheet" type="text/css" href="../css/defult.css">
<script src="https://use.fontawesome.com/72561c7928.js"></script>
<script src="../js/jquery-1.11.3.min.js"></script>
</head>

<body>

	<form name='form' method='post' action='reserve_proc.html' target="company_proc" >
		<input type='hidden' name='tbl' value='smart_resscomp'>
		<input type='hidden' name='mode' value='new'>
		<input type='hidden' name='seq' value='<?=$seq?>'>

	
	<header>
		<a href="../index.html"><img src="../images/logo_sub24.png" class="sub_logo" alt=""/></a>
	</header>
	
	<h2>상품안내 <a onclick="window.open('img24.html','','');" style="font-size:20px;cursor:pointer;">상세보기</a></h2>

	<section style="padding:0px 10px;">
		<table width="100%" class="tbst01" style='margin-bottom:5px;'>
			<thead>
				<tr>
					<th width="100%">상품선택</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td style="text-align:left;padding-left:20px;">
						<div><b>성별 :</b> 
							<select name="sex" onchange="cb_ck1( this.value )" required>
								<option value="">=성별을 선택해주세요=</option>
								<option value="여성">여성</option>
								<option value="남성">남성</option>
							</select></div>

						<div style='margin-top:10px;'><b>상품명:</b>
						<select id="ctype" name="ctype" style="margin-bottom:10px;" onchange="cb_check24( this.value );" required >
						<option value="">=성별을 먼저 선택해주세요=</option>
						</select><br/>
					   <span>공단검진 대상자는 <font color="red">공단청구 금액을 차감</font>해드립니다. </span></div>
					   </td>
				</tr>
			</tbody>
		</table>

		<div id="spDiv" style='padding:5px;margin-bottom:5px;'>
		</div>

		
<style>
span input {  margin-top:1px;	}
</style>


<script>

function cb_ck1( v ){
	//alert( v );
	let ctype = document.getElementById('ctype');
	ctype.innerHTML = "";
	let data = "<option>==상품선택하세요.==</option>";
	if( v=="여성" ){
		data += "<option value='여성특화'>여성특화검진_특가54만</option>";
		data += "<option value='소화기특화'>소화기특화검진_특가66만</option>";
		data += "<option value='뇌특화'>뇌특화검진_특가73만</option>";
		data += "<option value='심장특화'>심장특화검진_특가61만</option>";
		data += "<option value='호흡기특화'>호흡기특화검진_특가51만</option>";
		data += "<option value='실속형'>실속형종합검진_특가32만</option>"; 
		data += "<option value='건강형'>건강형종합검진_특가42만</option>";
		data += "<option value='소망형'>소망형종합검진_특가54만</option>";
		data += "<option value='믿음형'>믿음형종합검진_특가66만</option>";
		data += "<option value='행복형'>행복형종합검진_특가78만</option>";
		data += "<option value='사랑형'>사랑형종합검진_특가130만</option>";
	}

	if( v=="남성" ){
		data += "<option value='소화기특화'>소화기특화검진_특가59만</option>";
		data += "<option value='뇌특화'>뇌특화검진_특가66만</option>";
		data += "<option value='심장특화'>심장특화검진_특가52만</option>";
		data += "<option value='호흡기특화'>호흡기특화검진_특가44만</option>";
		data += "<option value='실속형'>실속형종합검진_특가25만</option>";
		data += "<option value='건강형'>건강형종합검진_특가35만</option>";
		data += "<option value='소망형'>소망형종합검진_특가47만</option>";
		data += "<option value='믿음형'>믿음형종합검진_특가59만</option>";
		data += "<option value='행복형'>행복형종합검진_특가71만</option>";
		data += "<option value='사랑형'>사랑형종합검진_특가125만</option>";
	}
	

	ctype.innerHTML = data;
	return false;
}


function cCheck( tid, tf, val ){
	var t = Number(document.form.txtTSel1.value);
	//alert( t + " " + tid + " " +  tf + " " +  val );
	if( tf ){
		if( t - val < 0 ){
			alert( "더이상 추가 선택이 불가합니다." );
			document.getElementById(tid).checked = false;
		}else{
			document.form.txtTSel1.value = t - val
		}
	}else{
		document.form.txtTSel1.value = t + val;
	}
}

function cCheck2( tid, tf, val ){
	let t2 = Number(document.form.txtTSel3.value);
	let t1 = Number(document.form.txtTSel1.value);

	console.log(t2);

	if(t2==0){
		if( tf ){
			if( t1 - (val*4) < 0 ){ 
				alert( "더이상 추가 선택을 할 수 없습니다." );
				document.getElementById(tid).checked = false;
			}else{
				document.form.txtTSel1.value = t1 - (val*4);
			}
		}else{
			document.form.txtTSel1.value = t1 + (val*4);
		}
	}else{
		if( tf ){
			if( t2 - val < 0 ){
				alert( "더이상 추가 선택을 할 수 없습니다." );
				document.getElementById(tid).checked = false;
			}else{
				document.form.txtTSel3.value = t2 - val;
			}
		}else{
			document.form.txtTSel3.value = t2 + val;
		}
	}
}

//24년 신규상품
function cb_check24(val) {
	let spDiv = document.getElementById('spDiv');
	//alert(val);
	let msg = " === 혈액(소변)검사 === \\n";
	msg += " 간기능 | 간염/순환기계 | 당뇨 | 췌장기능 \\n";
	msg += " 철결핍성 | 빈혈 | 혈액질환 | 전해질 \\n";
	msg += " 신장기능 | 골격계질환 | 감염성\\n";
	msg += " 갑상선 | 부갑상선기능 | 종양표지자\\n";
	msg += " 소변 | 생체나이 등 80여종 \\n\\n";
	msg += " === 장비검사 === \\n";
	msg += " 신장 | 체중 | 혈압 | 시력\\n";
	msg += " 청력 | 체성분 | 안압\\n";
	msg += " 위수면내시경 | 심전도 | 흉부X-ray \\n";
	msg += " [여성]자궁경부세포진 \\n";
	msg += " [여성]유방촬영 - 30세 이상 권장\\n";

	let msga = " === [A그룹] 선택목록 건별 +7만원 === \\n";
	msga += " 1)갑상선초음파 2)경동맥초음파 \\n";
	msga += " 3)복부초음파 4)[여성]경질맥초음파 \\n";
	msga += " 5)뇌CT 6)폐CT 7)요추CT \\n";
	msga += " 8)경추CT 9)심장MDCT \\n";
	msga += " 10)복부비만CT 11)[혈액]스마트암:췌장암 \\n";
	
	msga += " 12)골다공증QCT + 비타민D 13) ABI \\n";
	msga += " 14)[혈액]NK뷰키트 \\n";
	msga += " 15)[혈액]남/여성호르몬 \\n";
	msga += " 16)[여성]액상 자궁경부세포진 \\n";
	msga += " 17)[여성]H.P.V바이러스 \\n";
	msga += " 18)[여성_혈액]마스토체크_유방암 \\n";

	msga += "\\n === [B그룹] 선택목록 건별 +14만원 === \\n";	
	msga += " 1)대장수면내시경 2)[분변]대장암_얼리텍 \\n";
	msga += " 3)심장초음파 4)유방초음파 \\n";
	msga += " 5)[혈액]알레르기 \\n";
	msga += " 6)부정맥검사(S-PATCH) \\n";
	msga += " 7)알츠온(치매유전자검사) \\n";

	msga += "\\n === [C그룹] 선택목록 건별 +28만원 === \\n";	
	msga += " 1)뇌MRA+MRI 2)경추MRI 3)요추MRI \\n";
	msga += " 4)[혈액]스마트암검사(남6/여7종) \\n";
	msga += " 5)[타액/혈액]선천적유전자[남34/여35종]\\n";

	let msg1 = "<label style='padding: 5px; background: #d6e9f6;  border-radius: 10px;' onclick=\"alert('"+msg+"');\">공통항목보기</label>";
	let msg2 = "<label style='padding: 5px; background: #d6e9f6;  border-radius: 10px;' onclick=\"alert('"+msga+"');\">추가검사보기[본인부담]</label>";

	let txt = "";
	txt = "== <b>"+val+"검진 상품안내</b> ==";

	if(val=="여성특화"){
		txt += "<div> 공통항목 + 유전자 20종 + 갑상선초음파 <br>+ 경질초음파 + 유방초음파 + H.P.V바이러스</div>";	}

	if(val=="심장특화"){
		txt += "<div> 공통항목 + 유전자 20종 + 심장MDCT <br>+ 심장초음파 + 경동맥초음파";
		txt += "<br>+ 부정맥검사(S-PATCH)</div>"; }

	if(val=="뇌특화"){
		txt += "<div> 공통항목 + 유전자 20종 + 뇌MRI.MRA <br>+ 경동맥초음파 + 혈관협착도ABI";
		txt += "<br>+ 알츠온(치매위험도검사)</div>";	}

	if(val=="소화기특화"){
		txt += "<div> 공통항목 + 유전자 20종 + 복부초음파 <br>+ 복부조영CT + 갑상선초음파 + 경동맥초음파 <br> + 대장수면내시경</div>"; }

	if(val=="호흡기특화"){
		txt += "<div> 공통항목 + 유전자 20종 + 폐CT <br>+ 심장MDCT + 폐활량기능검사 + 경동맥초음파 <br>+ 갑상선초음파 + 대장수면내시경</div>"; }

	if(val=="실속형"){
		txt += "<div> 공통항목 + 복부초음파 + 유전자 20종</div>"; }
	
	if(val=="건강형"){
		txt += "<div> 공통항목 + 복부초음파 + 유전자 20종<br>+ 폐CT + 경동맥초음파</div>"; }
	
	if(val=="소망형"){
		txt += "<div> 공통항목 + 복부초음파 + 유전자 20종<br>+ 폐CT + 경동맥초음파<br>+ 심장MDCT + 갑상선초음파</div>"; }
	
	if(val=="믿음형"){
		txt += "<div> 공통항목 + 복부초음파 + 유전자 20종";
		txt += "<br>+ 폐CT + 경동맥초음파 + 심장MDCT";
		txt += "<br> + 갑상선초음파 + 대장수면내시경</div>"; }
	
	if(val=="행복형"){
		txt += "<div> 공통항목 + 복부초음파 + 유전자 20종";
		txt += "<br>+ 폐CT + 경동맥초음파";
		txt += "<br>+ 심장MDCT + 갑상선초음파";
		txt += "<br>+ 뇌MRI+MRA</div>"; }
	
	if(val=="사랑형"){
		txt += "<div> 공통항목 + 복부초음파 + 유전자 20종<br>+ 폐CT + 경동맥초음파";
		txt += "<br>+ 심장MDCT + 갑상선초음파 + 뇌MRI+MRA";
		txt += "<br>+ ABI혈관협착도 + 심장초음파 + 대장수면내시경";
		txt += "<br>+ 선천적유전자</div>"; }

	txt += "<div style='display: flex;justify-content: space-evenly;padding-top:5px;'>"+msg1+" "+msg2+"</div>";

	//txt += "<div>공통항목보기</div>";

//console.log(txt);
	spDiv.innerHTML = txt;
}


</script>

<script src="../js/jquery.js" type="text/javascript"></script>
<script src="../js/Calendar.js" type="text/javascript"></script>

<link type="text/css" href="../js/ui/themes/base/ui.all.css" rel="stylesheet" />
<script type="text/javascript" src="../js/ui/ui.core.js"></script>
<script type="text/javascript" src="../js/ui/ui.datepicker.js"></script>
<script type="text/javascript" src="../js/ui/ui.datepicker-ko.js"></script>
<script type="text/javascript">

$(function() {
	$('#datepicker1').datepicker({
		changeMonth: true,
		changeYear: true,
		yearRange: '2024:2030',
		minDate: new Date('2024-01-02')
	});	
});

</script>




<?

#$datetemp =  date("Y-m-d", strtotime(date("Y-m-d")." + 5 day"));
#$datetemp = "2023-01-02";
?>

		<table width="100%" class="tbst02">
			<tr>
				<th colspan="2" style="background:#187DC0 !important; color: #FFF !important;">일정 및 개인정보 입력</th>
			</tr>
			<tr>
				<th width="35%">검진 희망일</th>
				<td width="65%">
					
					<input type="text" name = "reserve_date"  id="datepicker1" class="intextst01" placeholder="" onfocus="blur();"  ><!--/*예약은 <?= $datetemp ?> 부터 가능합니다.*/-->
					<!--<input type="date" name = "reserve_date"  class="intextst01" placeholder="DD/MM/YYYY">-->
				</td>
			</tr>
			<tr>
				<th>검진접수시간</th>
				<td>
					<select name="reserve_hour">
						<option value="07">07시</option>
						<option value="08">08시</option>
						<option value="09">09시</option>
						<option value="10">10시</option>
						<option value="11">11시</option>
					</select>
					<select name="reserve_min">
						<option value="00">00분</option>
						<option value="30">30분</option>
					</select>
				</td>
			</tr>
			<tr>
				<th>성명</th>
				<td><input type="text" class="intextst01" name="name"  placeholder="성명을 입력해주세요"></td>
			</tr>
			<tr>
				<th>연락처</th>
				<td><input type="text" class="intextst01" name="mobile_no" placeholder="&quot;-&quot; 없이 입력해주세요."></td>
			</tr>
			<tr style='display:;'>
				<th>추천직원명</th>
				<td><input type="text" class="intextst01" name="pname" value="<?=$pname;?>" placeholder="추전직원 이름[부서] 입력해주세요"></td>
			</tr>
			<tr style='display:none;'>
				<th>추천직원연락처</th>
				<td><input type="text" class="intextst01" name="mobile_no2" placeholder="추전직원연락처를 입력해주세요"></td>
			</tr>
		</table>
		

<style>
div.caluse-common {
	color: #666;
	padding: 10px;
	height: 70px;
	border: 1px solid #ccc;
	overflow-x: hidden;
	overflow-y: auto;
	margin-bottom: 15px;
	text-align:left;
}
</style>

		<table width="100%" class="tbst01">
			<thead>
				<tr>
					<th colspan="4" style="background:#187DC0 !important; color: #FFF !important;">개인정보보호정책 동의</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>
					
		<h3>개인정보보호</h3>
		<div id="caluse-02" class="caluse-common">
인봉의료재단 뉴고려병원이 운영하는 온라인 예약 시스템에서 제공하는 서비스를 이용함에 있어 서비스 이용자들의 개인정보를 보호하기 위해 다음과 같이 개인정보보호정책을 수립하고 이를 준수합니다. 뉴고려병원의 『개인정보보호정책』은 수시로 내용이 변경될 수 있으므로 정기적으로 방문하셔서 확인해 보시기 바랍니다.  
<br>
<br>
<br>제1조 (총칙)
<br>
<br>① 뉴고려병원은 귀하의 개인정보보호를 매우 중요시하며, 『정보통신망이용촉진등에 관한법률』상의 개인정보보호 규정 및 정보통신부가 제정한 『개인정보보호지침』을 준수하고 있습니다. 뉴고려병원은 개인정보보호방침을 통하여 귀하께서 제공하시는 개인 정보가 어떠한 용도와 방식으로 이용되고 있으며 개인정보보호를 위해 어떠한 조치가 취해지고 있는지 알려드립니다. 
<br>
<br>② 뉴고려병원은 개인정보보호방침을 홈페이지 첫 화면에 공개함으로써 귀하께서 언제나 용이하게 보실 수 있도록 조치하고 있습니다. 
<br>
<br>③ 뉴고려병원은 개인정보보호방침의 지속적인 개선을 위하여 개인정보보호방침을 개정하는데 필요한 절차를 정하고 있습니다. 그리고 개인정보보호방침을 개정하는 경우 버전번호 등을 부여하여 개정된 사항을 귀하께서 쉽게 알아볼 수 있도록 하고 있습니다. 
<br>
<br>
<br>제2조(개인정보 수집에 대한 동의)
<br>
<br>뉴고려병원은 귀하께서 뉴고려병원의 개인정보보호방침 또는 이용약관의 내용에 대해 「동의합니다」버튼 또는 「동의하지 않음」버튼을 선택할 수 있는 절차를 마련하여, 「동의합니다」버튼을 선택하면 개인정보 수집에 대해 동의한 것으로 봅니다. 
<br>
<br>
<br>제3조(개인정보의 수집목적 및 이용목적)
<br>
<br>① 뉴고려병원은 다음과 같은 목적을 위하여 개인정보를 수집하고 있습니다.
<br>  - 서비스의 이행(예약/결과보기)
<br>  - 기타 새로운 서비스, 신상품이나 이벤트 정보 안내 
<br>
<br>② 단, 이용자의 기본적 인권 침해의 우려가 있는 민감한 개인정보(인종 및 민족, 사상 및 신조, 출신지 및 본적지, 정치적 성향 및 범죄기록, 건강상태 및 성생활 등)는 수집하지 않습니다. 
<br>
<br>
<br>제4조(세션에 의한 개인정보 수집) 
<br>
<br>뉴고려병원은 귀하에 대한 정보를 저장하고 수시로 찾아내는 '세션(session)'을 사용합니다. 세션은 웹사이트가 귀하의 컴퓨터 브라우저(넷스케이프, 인터넷 익스플로러 등)로 전송하는 소량의 정보입니다. 귀하께서 웹사이트에 접속을 하면 당사의 서버에 있는 세션의 내용을 읽고, 귀하의 추가정보를 찾아 접속에 따른 성명 등의 추가 입력없이 서비스를 제공할 수 있습니다. 세션은 귀하의 컴퓨터는 식별하지만 귀하를 개인적으로 식별하지는 않습니다. 
<br>
<br>
<br>제5조(목적외 사용 및 제3자에 대한 제공)
<br>
<br>①뉴고려병원은 귀하의 개인정보를 <개인정보의 수집목적 및 이용목적>에서 고지한 범위내에서 사용하며, 동범위를 초과하여 이용하거나 타인 또는 타기업, 기관에 제공하지 않습니다. 
<br>
<br>② 그러나 보다 나은 서비스 제공을 위하여 귀하의 개인정보를 제휴사에게 제공하거나 또는 제휴사와 공유할 수 있습니다. 개인정보를 제공하거나 공유할 경우에는 사전에 귀하께 제휴사가 누구인지, 제공 또는 공유되는 개인정보항목이 무엇인지, 왜 그러한 개인정보가 제공되거나 공유되어야 하는지, 그리고 언제까지 어떻게 보호. 관리되는지에 대해 개별적으로 전자우편 및 서면을 통해 고지하여 동의를 구하는 절차를 거치게 되며, 귀하께서 동의하지 않는 경우에는 제휴사에게 제공하거나 제휴사와 공유하지 않습니다. 
<br>
<br>
<br>제6조(개인정보의 열람/정정) 
<br>
<br>① 귀하는 언제든지 등록되어 있는 귀하의 개인정보를 열람하거나 정정하실 수 있습니다. 개인정보 열람 및 정정을 하고자 할 경우에는 <회원정보 조회/수정>을 클릭하여 직접 열람 또는 정정을 해야합니다.  
<br>
<br>② 귀하가 개인정보의 오류에 대한 정정을 요청한 경우, 정정을 완료하기 전까지 당해 개인정보를 이용하지 않습니다.
<br>
<br>
<br>제7조(개인정보 수집/이용/제공에 대한 동의철회) 
<br>
<br>① 회원가입 등을 통해 개인정보의 수집, 이용, 제공에 대해 귀하께서 동의하신 내용을 귀하는 언제든지 철회하실 수 있습니다. 동의철회는 개인정보관리책임자에게 E-mail 등으로 연락하시면 즉시 개인정보의 삭제 등 필요한 조치를 하겠습니다. 
<br>
<br>② 뉴고려병원은 개인정보의 수집에 대한 동의철회(회원탈퇴)를 개인정보 수집시와 동등한 방법 및 절차로 행사할 수 있도록 필요한 조치를 하겠습니다.
<br>
<br>
<br>제8조(개인정보의 보유기간 및 이용기간)
<br>
<br>뉴고려병원은 귀하의 개인정보를 취급함에 있어 개인정보가 분실, 도난, 누출, 변조 또는 훼손되지 않도록 안전성 확보를 위하여 다음과 같은 기술적 대책을 강구하고 있습니다. 
<br>
<br>① 귀하의 개인정보는 비밀번호에 의해 보호되며, 파일 및 전송데이터를 암호화하거나 파일잠금기능(Lock)을 사용하여 중요한 데이터는 별도의 보안기능을 통해 보호되고 있습니다. 
<br>
<br>② 뉴고려병원은 백신프로그램을 이용하여 컴퓨터 바이러스에 의한 피해를 방지하기 위한 조치를 취하고 있습니다. 백신프로그램은 주기적으로 업데이트되며 갑작스런 바이러스가 출현할 경우 백신이 나오는 즉시 이를 제공함으로써 개인정보가 침해되는 것을 방지하고 있습니다. 
<br>
<br>③ 해킹 등에 의해 귀하의 개인정보가 유출되는 것을 방지하기 위해, 외부로부터의 침입을 차단하는 장치를 이용하고 있으며, 각 서버마다 침입탐지시스템을 설치하여 24시간 침입을 감시하고 있습니다.
<br>
<br>
<br>제9조(개인정보의 위탁처리) 
<br>
<br>뉴고려병원은 서비스 향상을 위해서 귀하의 개인정보를 외부에 위탁하여 처리할 수 있습니다. 
<br>
<br>① 개인정보의 처리를 위탁하는 경우에는 미리 그 사실을 귀하에게 고지하겠습니다.
<br>
<br>② 개인정보의 처리를 위탁하는 경우에는 위탁계약 등을 통하여 서비스제공자의 개인정보보호관련 지시엄수, 개인정보에 관한 비밀유지, 제3자 제공의 금지 및 사고시의 책임부담 등을 명확히 규정하고 당해 계약내용을 서면 또는 전자적으로 보관하겠습니다.
<br>
<br>
<br>제10조(의견수렴 및 불만처리)
<br>
<br>뉴고려병원은 개인정보보호와 관련하여 귀하가 의견과 불만을 제기할 수 있는 창구를 개설하고 있습니다. 개인정보와 관련한 불만이 있으신 분은 뉴고려병원의 개인정보 관리책임자에게 의견을 주시면 접수 즉시 조치하여 처리결과를 통보해 드립니다. 또는 정부에서 설치하여 운영중인 개인정보침해신고센터에 불만처리를 신청할 수 있습니다.
<br>(개인정보침해신고센터 - http://www.cyberprivacy.or.kr 전화 02-1336) 
<br>
<br>
<br>
<br>- 성 명 :  전산팀장
<br>- 전화번호 :  031-980-9199
<br>		</div>
		


		<p class="calusep"><input type="checkbox" id="agree" name="agree" value="yes"> 개인정보보호정책에 동의합니다.</p>
		
	</section>
</article>


					
					</td>
				</tr>
			</tbody>
		</table>
		
		<div style="padding:20px 0px;">
			<a href="#" class="btnst01" onClick="chkForm(document.form)">검진 예약하기</a>
			
		</div>
	</section>

	</form>

</div>


<?
//================= 예약일 일자 설정 
$reserve_interval = 4 ;

?>


<!--//=== 시간체크를 위한 스크립트 -->
<script language="JavaScript">

function toTimeObject(time) // 2011-11-11
{
	/*
	var year = time.substr(0,4) ;
	var month = time.substr(5,2) ;
	var day = time.substr(8,2) ;
	*/

	var arr_t = time.split("-") ;
	var year = arr_t[0] ;
	var month = arr_t[1] ;
	var day = arr_t[2] ;

	var c_date = new Date(year, month, day) ;
	var t = c_date.getTime() ;

	return t ;

}

function getDateInterval(time1, time2)
{

	var date1 = toTimeObject(time1);
	var date2 = toTimeObject(time2);
	var day = 1000 * 3600 * 24 ;
	var temp =  date2 - date1 ;

	return parseInt((date2 - date1)/day, 10);
}

function converDateString(dt){
	return dt.getFullYear() + "-" + addZero(eval(dt.getMonth()+1)) + "-" + addZero(dt.getDate());
}

function addZero(i){
	var rtn = i + 100;
	return rtn.toString().substring(1,3);
}

function calDateRange(val1, val2)
{
	var FORMAT = "-";
	// FORMAT을 포함한 길이 체크
	if (val1.length != 10 || val2.length != 10)
		return null;
	// FORMAT이 있는지 체크
	if (val1.indexOf(FORMAT) < 0 || val2.indexOf(FORMAT) < 0)
		return null;
	// 년도, 월, 일로 분리
	var start_dt = val1.split(FORMAT);
	var end_dt = val2.split(FORMAT);

	// 월 - 1(자바스크립트는 월이 0부터 시작하기 때문에...)
	// Number()를 이용하여 08, 09월을 10진수로 인식하게 함.
	start_dt[1] = (Number(start_dt[1]) - 1) + "";
	end_dt[1] = (Number(end_dt[1]) - 1) + "";
	var from_dt = new Date(start_dt[0], start_dt[1], start_dt[2]);
	var to_dt = new Date(end_dt[0], end_dt[1], end_dt[2]);
	return (to_dt.getTime() - from_dt.getTime()) / 1000 / 60 / 60 / 24;
}

</script>


<script language="JavaScript">
<!--	

/*
var sd = "2016-10-28" ;
//var ed = "2016-10-31" ;
var ed = "2016-11-01" ;
var tt = getDateInterval(sd, ed) ;
var cc = calDateRange(sd, ed) ;

alert(tt + " || " + cc + " &&--> " + sd + " ||| " + ed) ;

var today = new Date();  
var dateString ="2016-10-29" ;
var dateArray = dateString.split("-");  
var dateObj = new Date(dateArray[0], Number(dateArray[1])-1, dateArray[2]);  
var betweenDay = (today.getTime() - dateObj.getTime())/1000/60/60/24;  
*/


function chkForm(frm) {



	if (!$("#agree").attr("checked"))
	 {
	  alert('개인정보활용에 동의해 주세요');
	  frm.agree.focus();
	  return;
	 }

	

	if(!frm.reserve_date.value) {
		alert('검진희망일을 선택해 주세요.');
		frm.reserve_date.focus();
		return false;
	}else{
		var val =  new Date(frm.reserve_date.value).getDay();
		if(val == 0){
			alert('일요일은 예약이 안됩니다.\n검진희망일을 선택해 주세요.');
			frm.reserve_date.focus();
			return false;
		}
	}


	//== 검진 가능일 계산
	var newDt = new Date();
	var intd = <?=$reserve_interval?> ;
	newDt.setDate( newDt.getDate() + intd );
	var nextDate = converDateString(newDt);

	var Today = new Date(); //오늘의 날짜정보를 가져옴.
	var year = Today. getFullYear();//객체에생선된 년도 정보를 가져옴.
	var month = Today.getMonth() + 1;//객체에 생선된 월의 정보를 가져옴…
	var day = Today.getDate();//객체에 생선된 일의 정보를 가져옴.
	var date1 = year + "-" + addZero(month) + "-" + addZero(day) ;


	if(frm.reserve_date.value )
	{
		//var temp = getDateInterval(date1, frm.reserve_date.value) ;
		var temp = calDateRange(date1, frm.reserve_date.value) ;
		

		//alert(temp + " --> " + date1 + " ||| " + frm.reserve_date.value) ;


		if(temp <= <?=$reserve_interval?>) 
		{
			alert('검진은 ' + nextDate + ' 이후부터 가능합니다') ;
			frm.reserve_date.focus();
			return false;
		}		
	}


	if(!frm.name.value) {
		alert('성명을 입력해 주세요.');
		frm.name.focus();
		return false;
	}


	if(!frm.mobile_no.value) {
		alert('연락처를 입력해 주세요.');
		frm.mobile_no.focus();
		return false;
	}

	if(!frm.ctype.value) {
		alert('상품을 선택해 주세요.');
		frm.ctype.focus();
		return false;
	}
	
	frm.submit();
}



function chk_radio() 
{ 
	 num_temp = document.all.item_category.length; 

	 for (i=0;i<num_temp ;i++) 
	 { 
	  if (document.all.item_category[i].checked == true) 
	  { 
		 break; 
	  } 
	 } 
	 if (i == num_temp) 
	 { 
		//alert("하나를 선택하세요"); 
		return false ;
	 }
	 else 
	{
		return true ;
	}
} 
//-->
</script>


<iframe name="company_proc" width=700 height=700 style="display:none;"></iframe>


	<footer>
		<p>Copyright(c) 2016 NEW Korea Hospital</p>
	</footer>
</body>
</html>


